# Production Environment Configuration
# Server
server.port=8222

# Application
spring.application.name=service-gateway

# Gateway Discovery
spring.cloud.config.enabled=false

# Gateway Routes - Production Environment
spring.cloud.gateway.routes[0].id=auth-service
spring.cloud.gateway.routes[0].uri=lb://AUTH-SERVICE
spring.cloud.gateway.routes[0].predicates[0]=Path=/api/auth/**
spring.cloud.gateway.routes[0].filters[0]=StripPrefix=2

spring.cloud.gateway.routes[1].id=certificat-service
spring.cloud.gateway.routes[1].uri=lb://CERTIFICAT-SERVICE
spring.cloud.gateway.routes[1].predicates[0]=Path=/api/certificat/**
spring.cloud.gateway.routes[1].filters[0]=StripPrefix=2

spring.cloud.gateway.routes[2].id=evaluation-service
spring.cloud.gateway.routes[2].uri=lb://EVALUATION-SERVICE
spring.cloud.gateway.routes[2].predicates[0]=Path=/api/evaluation/**
spring.cloud.gateway.routes[2].filters[0]=StripPrefix=2

spring.cloud.gateway.routes[3].id=formation-service
spring.cloud.gateway.routes[3].uri=lb://FORMATION-SERVICE
spring.cloud.gateway.routes[3].predicates[0]=Path=/api/formation/**
spring.cloud.gateway.routes[3].filters[0]=StripPrefix=2

spring.cloud.gateway.routes[4].id=ai-reco-service
spring.cloud.gateway.routes[4].uri=lb://AI-RECO-SERVICE
spring.cloud.gateway.routes[4].predicates[0]=Path=/api/ai/**
spring.cloud.gateway.routes[4].filters[0]=StripPrefix=2

spring.cloud.gateway.routes[5].id=besoinsformation-service
spring.cloud.gateway.routes[5].uri=lb://BESOINSFORMATION-SERVICE
spring.cloud.gateway.routes[5].predicates[0]=Path=/api/besoinsformation/**
spring.cloud.gateway.routes[5].filters[0]=StripPrefix=2

spring.cloud.gateway.routes[6].id=competence-service
spring.cloud.gateway.routes[6].uri=lb://COMPETENCE-SERVICE
spring.cloud.gateway.routes[6].predicates[0]=Path=/api/competence/**
spring.cloud.gateway.routes[6].filters[0]=StripPrefix=2

# Eureka Client Configuration for Production
eureka.client.service-url.defaultZone=http://eureka-server-prod:8761/eureka
eureka.instance.prefer-ip-address=true
eureka.instance.hostname=gateway-prod

# CORS Configuration - Production Environment
spring.cloud.gateway.globalcors.cors-configurations.[/**].allowed-origins[0]=https://your-prod-domain.com
spring.cloud.gateway.globalcors.cors-configurations.[/**].allowed-origins[1]=https://www.your-prod-domain.com
spring.cloud.gateway.globalcors.cors-configurations.[/**].allowed-methods[0]=GET
spring.cloud.gateway.globalcors.cors-configurations.[/**].allowed-methods[1]=POST
spring.cloud.gateway.globalcors.cors-configurations.[/**].allowed-methods[2]=PUT
spring.cloud.gateway.globalcors.cors-configurations.[/**].allowed-methods[3]=DELETE
spring.cloud.gateway.globalcors.cors-configurations.[/**].allowed-methods[4]=OPTIONS
spring.cloud.gateway.globalcors.cors-configurations.[/**].allowed-methods[5]=PATCH
spring.cloud.gateway.globalcors.cors-configurations.[/**].allowed-headers[0]=*
spring.cloud.gateway.globalcors.cors-configurations.[/**].allow-credentials=true
spring.cloud.gateway.globalcors.cors-configurations.[/**].max-age=3600

# Spring Main
spring.main.allow-bean-definition-overriding=true

# Logging Configuration for Production
logging.level.org.springframework.cloud.gateway=WARN
logging.level.com.example.servicegateway=INFO
logging.level.org.springframework=WARN
logging.pattern.console=%d{yyyy-MM-dd HH:mm:ss} [%thread] %-5level %logger{36} - %msg%n

# Health and Monitoring
management.endpoints.web.exposure.include=health,info
management.endpoint.health.show-details=never

# JVM Configuration for Production
server.tomcat.max-threads=200
server.tomcat.max-connections=10000
spring.jpa.show-sql=false

# Security Configuration
server.error.include-stacktrace=never
server.error.include-message=never
